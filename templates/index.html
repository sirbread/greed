<!DOCTYPE html>
<html>
<head>
    <title>greed</title>
    <style>
        #timer {
            position: fixed;
            bottom: 10px;
            left: 0;
            width: 100vw;
            text-align: center;
            font-size: 1.2em;
            color: #333;
            background: #fffffff0;
            padding: 8px 0;
            z-index: 100;
        }
        #scoreboard {
            margin-top: 24px;
        }
        #input-message {
            color: rgb(255, 0, 0);
            margin-top: 0.5em;
        }
        #help-link, #graphs-link, #chat-link {
            margin-bottom: 1.5em;
            display: block;
        }
        .winner-message {
            font-size: 1.3em;
            color: green;
            margin: 1.5em 0;
        }
        #auth-section {
            margin-bottom: 1em;
        }
        #username-section {
            margin: 1.5em 0;
            display: none;
        }
        #username-error {
            color: red;
            margin-top: 0.5em;
        }
        #greed-rate {
            margin-top: 1em;
            font-size: 1.1em;
        }
        #pregame-container {
            display: none;
            min-height: 60vh;
            text-align: center;
            padding-top: 15vh;
        }
        #pregame-timer {
            font-size: 2.2em;
            margin: 1em 0 1em 0;
            color: #019239;
        }
        #pregame-username-section {
            margin: 1.5em 0;
        }
        #pregame-username-error {
            color: red;
            margin-top: 0.5em;
        }
    </style>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
    <script>
      const firebaseConfig = {
        apiKey: "{{ firebase_api_key }}",
        authDomain: "{{ firebase_auth_domain }}",
        projectId: "{{ firebase_project_id }}",
        storageBucket: "{{ firebase_storage_bucket }}",
        messagingSenderId: "{{ firebase_messaging_sender_id }}",
        appId: "{{ firebase_app_id }}"
      };
      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();
    </script>
</head>
<body>
    <div id="pregame-container">
        <div id="pregame-userinfo"></div>
        <button id="pregame-logout" style="display:none;">logout</button>
        <div style="margin-top:4em;color:#555;">greed is starting in...</div>
        <div id="pregame-timer"></div>
        <div id="pregame-username-section" style="display:none;">
            <label for="pregame-username-input">enter your username:</label>
            <input id="pregame-username-input" type="text" maxlength="20" pattern="^[a-zA-Z0-9_]+$" autocomplete="off" autocapitalize="off">
            <button id="pregame-username-go">go!</button>
            <div id="pregame-username-error"></div>
        </div>
    </div>

    <div id="main-content">
        <h1>pick a number (1-10, inclusive, integer)</h1>
        <h3>first player to reach <span id="winning-score">{{ winning_score }}</span> points wins!</h3>
        <h4 id="round-duration-desc"></h4>
        <a id="help-link" href="/help">what is this?</a>
        <a id="graphs-link" href="/graphs">see stats</a>
        <a id="graphs-link" href="/chat">bluff</a>

        <div id="auth-section">
            <button id="logout" style="display:none;">logout</button>
            <span id="user-info"></span>
        </div>

        <div id="username-section">
            <label for="username-input">enter your username:</label>
            <input id="username-input" type="text" maxlength="20" pattern="^[a-zA-Z0-9_]+$" autocomplete="off" autocapitalize="off">
            <button id="username-go">go!</button>
            <div id="username-error"></div>
        </div>

        <div id="game" style="display:none;">
            <input type="number" id="numberInput" min="1" max="10">
            <button onclick="submit()">submit</button>
            <div id="input-message"></div>
            <div id="status"></div>
            <div id="greed-rate"></div>
            <div id="greedDiss" style="margin-top:0.2em;color:#ff0000;font-style:italic"></div>
        </div>

        <div id="scoreboard">
            <h2>leaderboard</h2>
            <pre id="scores">loading...</pre>
        </div>
        <div id="timer">loading time...</div>
    </div>

    <script src="/static/main.js"></script>
</body>
</html>